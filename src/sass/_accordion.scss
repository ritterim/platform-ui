@use "config";
@use "mixins";
@use "variables" as variables;
@use "sass:color";
@use "sass:math";
@use "sass:map";

.accordion {
  $self: &;
  --accordion-primary-color: var(--navy);
  --accordion-primary-background: var(--white);
  --accordion-header-background: var(--lighter);
  --accordion-primary-border-color: var(--light-mid);

  // #ccc Replcaing with light-mid = #e2e3e5
  // $accordion-primary-border-color: color.adjust(
  //   map.get(variables.$greyscale, "light"),
  //   $lightness: math.percentage(config.$hue-threshold * 2)
  // );

  --accordion-hover-border: var(--skyblue);

  background-color: var(--accordion-primary-background);
  border: 1px solid transparent;
  border-top-color: var(--accordion-primary-border-color);
  color: var(--accordion-primary-color);
  font-size: 100%;
  transition: border-color var(--transitions);

  &:last-of-type {
    border-bottom-color: var(--accordion-primary-border-color);
  }

  &:not(.active):hover {
    border-color: var(--accordion-hover-border);

    #{$self}__header {
      background-color: var(--accordion-header-background);
    }
  }

  &.active {
    border-color: transparent;
    box-shadow: 0px 0px 0px 2px var(--accordion-hover-border);

    > #{$self}__header {
      background-color: var(--accordion-header-background);

      #{$self}__icon {
        @extend %rotate-180;
      }
    }
    > #{$self}__content {
      display: block;
    }
  }

  &__header {
    display: flex;
    position: relative;
    transition: background-color var(--transitions);
    z-index: 10;
  }

  &__icon {
    transition: transform var(--transitions);
  }

  &__content {
    > #{$self} {
      border: none;
      &:not(.active):hover {
        #{$self}__header {
          background-color: var(--accordion-primary-background);
        }
      }
      &.active {
        border: none;
        box-shadow: none;
      }
      > #{$self} {
        &__header {
          background-color: var(--accordion-primary-background);
          font-weight: bold;
        }
      }
    }
    border-top: none;
    display: none;
    position: relative;
    z-index: 0;
  }
}
