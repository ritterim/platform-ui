@use "config";
@use "mixins";
@use "variables" as variables;
@use "sass:color";
@use "sass:math";
@use "sass:map";

.accordion {
  $self: &;

  --_accordion-primary-color: var(--accordion-primary-color, var(--navy));
  --_accordion-primary-background: var(--accordion-primary-background, var(--white));
  --_accordion-header-background: var(--accordion-header-background, var(--lighter));
  --_accordion-primary-border-color: var(--accordion-primary-border-color, var(--light-3));
  --_accordion-hover-border: var(--accordion-hover-border, var(--skyblue));

  background-color: var(--_accordion-primary-background);
  border: 1px solid transparent;
  border-top-color: var(--_accordion-primary-border-color);
  color: var(--_accordion-primary-color);
  font-size: 100%;
  transition: border-color var(--transitions);

  &:last-of-type {
    border-bottom-color: var(--_accordion-primary-border-color);
  }

  &:not(.active):hover {
    border-color: var(--_accordion-hover-border);

    #{$self}__header {
      background-color: var(--_accordion-header-background);
    }
  }

  &.active {
    border-color: transparent;
    box-shadow: 0px 0px 0px 2px var(--_accordion-hover-border);

    > #{$self}__header {
      background-color: var(--_accordion-header-background);

      #{$self}__icon {
        @extend %rotate-180;
      }
    }
    > #{$self}__content {
      display: block;
    }
  }

  &__header {
    display: flex;
    position: relative;
    transition: background-color var(--transitions);
    z-index: 10;
  }

  &__icon {
    transition: transform var(--transitions);
  }

  &__content {
    border-top: none;
    display: none;
    position: relative;
    z-index: 0;
    
    > #{$self} {
      border: none;
      &:not(.active):hover {
        #{$self}__header {
          background-color: var(--_accordion-primary-background);
        }
      }
      &.active {
        border: none;
        box-shadow: none;
      }
      > #{$self} {
        &__header {
          background-color: var(--_accordion-primary-background);
          font-weight: bold;
        }
      }
    }
  }
}
